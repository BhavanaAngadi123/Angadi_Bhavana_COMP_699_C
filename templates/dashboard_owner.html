{% extends 'base.html' %}

{% block content %}

<style>
/* ----- Global ---- */
body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a18cd1, #fbc2eb);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: #333;
    position: relative;
    overflow-x: hidden;
}
@keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
}

/* ----- Floating Paw Animation ---- */
.paw {
    position: absolute;
    width: 40px;
    height: 40px;
    background: url('https://img.icons8.com/emoji/48/000000/paw-prints.png') no-repeat center/contain;
    animation: floatPaw linear infinite;
    opacity: 0.7;
}
@keyframes floatPaw {
    0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0.5;}
    50% { opacity: 1;}
    100% { transform: translateY(-50vh) translateX(50px) rotate(360deg); opacity: 0;}
}

/* ----- Header ---- */
header {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    padding: 25px 20px;
    text-align: center;
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
}
header h1 { 
    margin:0; 
    font-size:2.2em; 
    text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
}
header p { 
    margin:5px 0 0; 
    font-size:1.1em; 
    text-shadow: 1px 1px 5px rgba(0,0,0,0.2);
}

/* ----- Dashboard Cards ---- */
.dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
    padding: 40px 30px;
}
.card {
    background: rgba(255,255,255,0.85);
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    padding: 25px 20px;
    text-align: center;
    transition: all 0.4s ease;
    text-decoration: none;
    color: inherit;
    display: block;
}
.card:hover {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 20px 35px rgba(0,0,0,0.25);
    background: rgba(255,255,255,0.95);
}

/* ----- Card Icon Circle ---- */
.card-icon {
    width: 100px;
    height: 100px;
    margin: auto;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    transition: transform 0.4s, box-shadow 0.4s;
}
.card:hover .card-icon {
    transform: scale(1.15);
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
}
.card-icon img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
}

/* ----- Card Text ---- */
.card h3 {
    margin: 12px 0 5px;
    font-size: 1.3rem;
    color: #ff4b6e;
}
.card p {
    color: #555;
    font-size: 0.95em;
    line-height: 1.3em;
}

/* ----- Carousel ---- */
.carousel {
    display: flex;
    overflow-x: auto;
    padding: 20px 0;
    gap: 15px;
    scroll-behavior: smooth;
}
.carousel::-webkit-scrollbar { height: 8px; }
.carousel::-webkit-scrollbar-thumb { background-color: #ff758c; border-radius: 10px; }
.carousel img { border-radius: 20px; height: 160px; object-fit: cover; flex-shrink: 0; transition: transform 0.3s ease, box-shadow 0.3s ease;}
.carousel img:hover { transform: scale(1.05); box-shadow: 0 12px 25px rgba(0,0,0,0.3); }

/* ----- Section Titles ---- */
h2 { text-align:center; margin:40px 0 25px; font-size:1.8rem; color:#fff; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }

</style>

<!-- Floating Paw Elements -->
<div class="paw" style="left:5%; animation-duration:12s;"></div>
<div class="paw" style="left:25%; animation-duration:18s;"></div>
<div class="paw" style="left:50%; animation-duration:15s;"></div>
<div class="paw" style="left:75%; animation-duration:20s;"></div>
<div class="paw" style="left:90%; animation-duration:17s;"></div>

<header>
  <h1>üêæ HappyTails Dashboard</h1>
  <p>Welcome, Broo! Manage your pets, playdates, shopping & more</p>
</header>

<section class="dashboard">

  <!-- Your Pets -->
  <a href="{{ url_for('owner.pets') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #ff758c, #ffb199);">
      {% if my_pets %}
        <img src="{{ url_for('static', filename='uploads/' ~ my_pets[0].image) }}" alt="My Pet" class="pet">
      {% else %}
        <img src="https://img.icons8.com/color/96/000000/dog.png" alt="View Pets">
      {% endif %}
    </div>
    <h3>Your Pets</h3>
    <p>View, edit info, or check details</p>
  </a>

  <!-- Add New Pet -->
  <a href="{{ url_for('owner.add_pet') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #6a11cb, #2575fc);">
      <img src="https://img.icons8.com/emoji/96/000000/plus.png" alt="Add Pet">
    </div>
    <h3>Add New Pet</h3>
    <p>Keep your pet dashboard up-to-date</p>
  </a>

  <!-- Playdates -->
  <a href="{{ url_for('owner.playdates') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #ff9a9e, #fad0c4);">
      <img src="https://img.icons8.com/color/96/000000/calendar--v1.png" alt="Playdates">
    </div>
    <h3>Playdates</h3>
    <p>Schedule & manage playdates for your pets</p>
  </a>

  <!-- Lost & Found -->
  <a href="{{ url_for('owner.lost_found') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #f7971e, #ffd200);">
      <img src="https://img.icons8.com/color/96/000000/lost-and-found.png" alt="Lost Pets">
    </div>
    <h3>Lost & Found</h3>
    <p>Report lost pets & get real-time alerts</p>
  </a>

  <!-- Reviews -->
  <a href="{{ url_for('owner.reviews') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #43cea2, #185a9d);">
      <img src="https://img.icons8.com/color/96/000000/feedback.png" alt="Reviews">
    </div>
    <h3>Ratings & Reviews</h3>
    <p>Rate sitters & products after use</p>
  </a>

  <!-- Subscriptions -->
  <a href="{{ url_for('owner.subscription') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #ff512f, #dd2476);">
      <img src="https://img.icons8.com/color/96/000000/recurring-appointment.png" alt="Subscriptions">
    </div>
    <h3>Subscriptions</h3>
    <p>Subscribe to recurring pet supplies</p>
  </a>

  <!-- Shop Products -->
  <a href="{{ url_for('owner.shop') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #1fa2ff, #12d8fa);">
      <img src="https://img.icons8.com/color/96/000000/shopping-cart.png" alt="Shop Products">
    </div>
    <h3>Shop Products</h3>
    <p>Browse products & manage your cart</p>
  </a>

  <!-- Find Sitters -->
  <a href="{{ url_for('owner.find_sitters') }}" class="card">
    <div class="card-icon" style="background: linear-gradient(135deg, #f7971e, #ffd200);">
      <img src="https://img.icons8.com/emoji/96/000000/woman-walking-dog.png" alt="Find Sitters">
    </div>
    <h3>Find Sitters</h3>
    <p>Book verified sitters nearby</p>
  </a>

</section>

<section>
  <h2>üê∂ Featured Pets from Other Owners</h2>
  <div class="carousel">
    {% for pet in other_pets %}
      <div class="card" style="min-width:200px; text-align:center;">
        {% if pet.image %}
          <img src="{{ url_for('static', filename='uploads/' ~ pet.image) }}" alt="{{ pet.name }}" style="border-radius:15px; width:150px; height:150px; object-fit:cover;">
        {% else %}
          <img src="https://placekitten.com/150/150" alt="{{ pet.name }}" style="border-radius:15px; width:150px; height:150px; object-fit:cover;">
        {% endif %}
        <h4>{{ pet.name }}</h4>
        <p>{{ pet.breed }}, {{ pet.age }} yrs</p>
      </div>
    {% else %}
      <p>No other pets found üò¢</p>
    {% endfor %}
  </div>
</section>

<section>
  <h2>üêæ Featured Sitters Nearby</h2>
  <div class="carousel">
    {% for item in sitter_data %}
      <div class="card" style="min-width:200px; text-align:center;">
        {% if item.sitter.profile_image %}
          <img src="{{ url_for('static', filename='uploads/' ~ item.sitter.profile_image) }}" alt="{{ item.sitter.name }}" style="border-radius:15px; width:150px; height:150px; object-fit:cover;">
        {% else %}
          <img src="https://img.icons8.com/color/150/000000/woman-walking-dog.png" alt="{{ item.sitter.name }}" style="border-radius:15px; width:150px; height:150px; object-fit:cover;">
        {% endif %}
        <h4>{{ item.sitter.name }}</h4>
        <p>
          {% for price in item.prices %}
            {{ price.service_name }}: ‚Çπ{{ price.price }}<br>
          {% else %}
            No services listed
          {% endfor %}
        </p>
      </div>
    {% else %}
      <p>No sitters found nearby üò¢</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
