{% extends "base.html" %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a18cd1, #fbc2eb);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    min-height: 100vh;
    color: #fff;
  }
  @keyframes gradientBG {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  .card {
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    transition: transform 0.3s, box-shadow 0.3s;
    margin-bottom: 30px;
  }
  .card:hover {
    transform: translateY(-7px) scale(1.02);
    box-shadow: 0 15px 50px rgba(0,0,0,0.4);
  }
  h2 { text-align: center; margin-bottom: 20px; text-shadow: 1px 1px 5px rgba(0,0,0,0.3); }
  table { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: #fff; }
  table th, table td { vertical-align: middle; color: #fff; }
  table th { border-bottom: 2px solid rgba(255,255,255,0.3); }
  table td { border-bottom: 1px solid rgba(255,255,255,0.2); }
  .btn-primary, .btn-success, .btn-danger { border-radius: 12px; font-weight: 500; }
  .btn-primary { background: linear-gradient(90deg, #ff9a9e, #fad0c4, #a18cd1); color: #fff; border: none; }
  .btn-success { background: linear-gradient(90deg, #6fcf97, #66d3fa); color: #fff; border: none; }
  .btn-danger { background: linear-gradient(90deg, #ff6b6b, #fbc2eb); color: #fff; border: none; }
  .btn:hover { transform: scale(1.05); }
  .back-btn { margin-bottom: 20px; }
</style>

<div class="container mt-5 mb-5">
  <div class="back-btn">
    <a href="{{ url_for('sitter.dashboard') }}" class="btn btn-outline-light">‚Üê Back to Dashboard</a>
  </div>

  <div class="card p-4">
    <h2>Booking Requests</h2>

    {% if bookings %}
    <table class="table table-bordered table-striped mt-3">
      <thead>
        <tr>
          <th>#</th>
          <th>Owner Name</th>
          <th>Pet Name</th>
          <th>Status</th>
          <th>Requested On</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for booking in bookings %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ booking.owner.name }}</td>
          <td>{{ booking.pet.name }}</td>
          <td>{{ booking.status.capitalize() }}</td>
          <td>{{ booking.created_at.strftime("%d-%m-%Y %H:%M") }}</td>
          <td>
            {% if booking.status == 'pending' %}
              <a href="{{ url_for('sitter.update_booking', id=booking.id, action='approved') }}" class="btn btn-success btn-sm mb-1">Approve</a>
              <a href="{{ url_for('sitter.update_booking', id=booking.id, action='rejected') }}" class="btn btn-danger btn-sm mb-1">Reject</a>
            {% elif booking.status == 'approved' %}
              <span class="badge bg-success">Approved</span>
            {% else %}
              <span class="badge bg-danger">Rejected</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <p class="text-center mt-3">No booking requests yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
